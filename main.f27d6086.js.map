{"version":3,"sources":["scripts/main.js"],"names":["document","addEventListener","tableHead","employeeForm","querySelector","tableBody","sortAscending","officeList","addNewEmployeeForm","createElement","action","method","classList","add","innerHTML","body","append","updateEditedCell","cell","cellColumnName","previousVal","currentVal","firstElementChild","value","input","validateInput","showNotification","toLocaleString","textContent","type","title","notification","messagesText","messages","name","age","length","valid","setAttribute","setTimeout","remove","inName","inVal","trim","findTableColumnName","tableHeader","tableHeadArray","children","map","item","convertStrToInt","str","out","parseInt","replace","e","selectedName","table","sortIndex","sortedData","selectedColName","target","closest","indexOf","sort","row1","row2","dataTypeOfSort","row1DataToSort","row2DataToSort","sortResult","localeCompare","forEach","row","currentSelectedRow","previousSelectedRow","toggle","editableCell","editableCellInput","previousValue","editableCellNumber","editableColumnName","toLowerCase","focus","key","preventDefault","addedEmployee","employee","tableColumnNames","FormData","newEmployee","Object","fromEntries","entries","validateForm","form","inputName","inputValue","result","cellData","reset"],"mappings":"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","file":"main.f27d6086.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const tableHead = document.querySelector('thead');\r\n  const tableBody = document.querySelector('tbody');\r\n  let sortAscending = true;\r\n  const officeList = `\r\n  <select data-qa=\"office\" name=\"office\">\r\n    <option selected disabled></option>\r\n    <option value=\"Tokyo\">\r\n      Tokyo\r\n    </option>\r\n    <option value=\"Singapore\">\r\n      Singapore\r\n    </option>\r\n    <option value=\"London\">\r\n      London\r\n    </option>\r\n    <option value=\"New York\">\r\n      New York\r\n    </option>\r\n    <option value=\"Edinburgh\">\r\n      Edinburgh\r\n    </option>\r\n    <option value=\"San Francisco\">\r\n      San Francisco\r\n    </option>\r\n    <option value=\"Kyiv\">\r\n      Kyiv\r\n    </option>\r\n  </select>\r\n  `;\r\n  const addNewEmployeeForm = createNewEmployeeForm();\r\n\r\n  tableHead.addEventListener('click', (e) => {\r\n    const selectedName = e.target.closest('th').textContent;\r\n\r\n    if (selectedName) {\r\n      sortTable(tableBody, selectedName);\r\n    }\r\n  });\r\n\r\n  tableBody.addEventListener('click', (e) => {\r\n    const currentSelectedRow = e.target.closest('tr');\r\n    const previousSelectedRow = tableBody.querySelector('tr.active');\r\n\r\n    if (previousSelectedRow && previousSelectedRow !== currentSelectedRow) {\r\n      previousSelectedRow.classList.remove('active');\r\n    }\r\n\r\n    if (currentSelectedRow) {\r\n      currentSelectedRow.classList.toggle('active');\r\n    }\r\n  });\r\n\r\n  tableBody.addEventListener('dblclick', (e) => {\r\n    const editableCell = e.target.closest('td');\r\n    const editableRow = editableCell.closest('tr');\r\n    const editableCellNumber = [...editableRow.children].indexOf(editableCell);\r\n\r\n    const editableColumnName\r\n      = findTableColumnName(tableHead)[editableCellNumber].toLowerCase();\r\n\r\n    let editableCellInput;\r\n    const previousVal = editableCell.textContent;\r\n\r\n    switch (true) {\r\n      case editableColumnName === 'salary':\r\n        editableCellInput = '<input class=\"cell-input\" type=\"number\">';\r\n        break;\r\n\r\n      case editableColumnName === 'age':\r\n        editableCellInput = '<input class=\"cell-input\" type=\"number\">';\r\n        break;\r\n\r\n      case editableColumnName === 'office':\r\n        editableCellInput = officeList;\r\n        break;\r\n\r\n      default:\r\n        editableCellInput = '<input class=\"cell-input\" type=\"text\">';\r\n    }\r\n\r\n    editableCell.innerHTML = editableCellInput;\r\n\r\n    editableCell.firstElementChild.focus();\r\n    addEditedCellInputEvents(editableCell, editableColumnName, previousVal);\r\n  });\r\n\r\n  addNewEmployeeForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n\r\n    const addedEmployee = new FormData(e.target);\r\n    const newEmployee = Object.fromEntries(addedEmployee.entries());\r\n\r\n    const { result, inputName } = validateForm(newEmployee);\r\n\r\n    if (!result) {\r\n      showNotification('error', inputName);\r\n\r\n      return;\r\n    };\r\n\r\n    addNewEmployee(newEmployee);\r\n    e.target.reset();\r\n    showNotification('success', '');\r\n  });\r\n\r\n  function addEditedCellInputEvents(cell, cellColumnName, previousValue) {\r\n    cell.firstElementChild.addEventListener('keyup', e => {\r\n      if (e.key === 'Enter') {\r\n        updateEditedCell(cell, cellColumnName, previousValue);\r\n      }\r\n    });\r\n\r\n    cell.firstElementChild.addEventListener('blur', e => {\r\n      updateEditedCell(cell, cellColumnName, previousValue);\r\n    });\r\n  }\r\n\r\n  function updateEditedCell(cell, cellColumnName, previousVal) {\r\n    const currentVal = cell.firstElementChild.value;\r\n    let input = '';\r\n\r\n    if (!validateInput(cellColumnName, currentVal)) {\r\n      showNotification('error', cellColumnName);\r\n      input = previousVal;\r\n    }\r\n\r\n    if (cellColumnName === 'salary') {\r\n      input = `$${+currentVal.toLocaleString('en')}`;\r\n    }\r\n\r\n    input = input || currentVal;\r\n\r\n    cell.textContent = input;\r\n  }\r\n\r\n  function showNotification(type, title) {\r\n    const notification = document.createElement('div');\r\n    const messages = {\r\n      name: 'Name should be equal or greater than 4 letters',\r\n      age: 'Age should be equal or greater than 18 and lower than 90',\r\n      length: 'Field should not be empty',\r\n      valid: 'Everything is ok',\r\n    };\r\n\r\n    let messagesText;\r\n\r\n    if (type === 'success') {\r\n      messagesText = messages.valid;\r\n    } else {\r\n      messagesText = messages[title]\r\n        ? messages[title]\r\n        : messages.length;\r\n    }\r\n\r\n    notification.classList.add('notification');\r\n    notification.classList.add(type);\r\n    notification.setAttribute('data-qa', 'notification');\r\n\r\n    notification.innerHTML = `\r\n      <h2 class=\"title\">\r\n        ${type === 'success' ? 'Success' : title + ' Error'}\r\n      </h2>\r\n      <p>${messagesText}</p>\r\n    `;\r\n\r\n    document.body.append(notification);\r\n\r\n    setTimeout(() => {\r\n      hideNotification(notification);\r\n    }, 5000);\r\n  }\r\n\r\n  function hideNotification(availableNotification) {\r\n    availableNotification.remove();\r\n  }\r\n\r\n  function createNewEmployeeForm() {\r\n    const employeeForm = document.createElement('form');\r\n\r\n    employeeForm.action = '#';\r\n    employeeForm.method = 'POST';\r\n    employeeForm.classList.add('new-employee-form');\r\n\r\n    employeeForm.innerHTML = `\r\n      <label>Name:\r\n        <input\r\n          data-qa=\"name\"\r\n          name=\"name\"\r\n          type=\"text\"\r\n        >\r\n      </label>\r\n\r\n      <label>Position:\r\n        <input\r\n          data-qa=\"position\"\r\n          name=\"position\"\r\n          type=\"text\"\r\n        >\r\n      </label>\r\n\r\n      <label>Office:\r\n        ${officeList}\r\n      </label>\r\n\r\n      <label>Age:\r\n        <input data-qa=\"age\" name=\"age\" type=\"number\">\r\n      </label>\r\n\r\n      <label>Salary:\r\n        <input data-qa=\"salary\" name=\"salary\" type=\"number\">\r\n      </label>\r\n\r\n      <button type=\"submit\">Save to table</button>\r\n    `;\r\n\r\n    document.body.append(employeeForm);\r\n\r\n    return employeeForm;\r\n  }\r\n\r\n  function addNewEmployee(employee) {\r\n    const tableColumnNames = findTableColumnName(tableHead);\r\n    const row = document.createElement('tr');\r\n\r\n    tableColumnNames.forEach(item => {\r\n      const cell = document.createElement('td');\r\n\r\n      let cellData;\r\n\r\n      switch (true) {\r\n        case item.toLowerCase() === 'salary':\r\n          cellData = `\r\n            $${(+employee[item.toLowerCase()]).toLocaleString('en')}\r\n          `;\r\n          break;\r\n        default:\r\n          cellData = `${employee[item.toLowerCase()]}`;\r\n      }\r\n\r\n      cell.innerHTML = cellData;\r\n      row.append(cell);\r\n    });\r\n\r\n    tableBody.append(row);\r\n  }\r\n\r\n  function validateForm(form) {\r\n    for (const [inputName, inputValue] of Object.entries(form)) {\r\n      if (!validateInput(inputName, inputValue)) {\r\n        return {\r\n          result: false,\r\n          inputName: inputName,\r\n        };\r\n      }\r\n    }\r\n\r\n    return { result: true };\r\n  }\r\n\r\n  function validateInput(inName, inVal) {\r\n    if (inName === 'name' && inVal.trim().length < 4) {\r\n      return false;\r\n    }\r\n\r\n    if (inName === 'age') {\r\n      const age = +inVal.trim();\r\n\r\n      return !(age < 18 || age > 90);\r\n    }\r\n\r\n    if (inVal.trim().length === 0) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  function findTableColumnName(tableHeader) {\r\n    const tableHeadElements = tableHeader.firstElementChild.children;\r\n\r\n    const tableHeadArray = [...tableHeadElements].map(item => item.textContent);\r\n\r\n    return tableHeadArray;\r\n  }\r\n\r\n  function findTableColumnNumberFromName(selectedColName) {\r\n    const tableColumnNames = findTableColumnName(tableHead);\r\n\r\n    return tableColumnNames.indexOf(selectedColName);\r\n  }\r\n\r\n  function sortTable(table, condition) {\r\n    const sortIndex = findTableColumnNumberFromName(condition);\r\n    const rowsData = table.children;\r\n\r\n    const sortedData = [...rowsData].sort((row1, row2) => {\r\n      const dataTypeOfSort\r\n        = convertStrToInt(row1.children[sortIndex].textContent)\r\n          ? 'number'\r\n          : 'string';\r\n\r\n      let row1DataToSort;\r\n      let row2DataToSort;\r\n      let sortResult;\r\n\r\n      if (dataTypeOfSort === 'number') {\r\n        row1DataToSort = convertStrToInt(row1.children[sortIndex].textContent);\r\n        row2DataToSort = convertStrToInt(row2.children[sortIndex].textContent);\r\n\r\n        sortResult = sortAscending\r\n          ? row1DataToSort - row2DataToSort\r\n          : row2DataToSort - row1DataToSort;\r\n      } else {\r\n        row1DataToSort = row1.children[sortIndex].textContent;\r\n        row2DataToSort = row2.children[sortIndex].textContent;\r\n\r\n        sortResult = sortAscending\r\n          ? row1DataToSort.localeCompare(row2DataToSort)\r\n          : row2DataToSort.localeCompare(row1DataToSort);\r\n      }\r\n\r\n      return sortResult;\r\n    });\r\n\r\n    sortAscending = !sortAscending;\r\n\r\n    tableBody.innerHTML = '';\r\n\r\n    sortedData.forEach(row => {\r\n      tableBody.append(row);\r\n    });\r\n  }\r\n\r\n  function convertStrToInt(str) {\r\n    const reg = /\\D/g;\r\n\r\n    const out = parseInt(str.replace(reg, ''));\r\n\r\n    return out;\r\n  }\r\n});\r\n"]}